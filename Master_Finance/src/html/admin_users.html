<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="<?php echo \App\Core\Middleware::generateCsrfToken(); ?>">
    <title>Manage Users - Master Finance CRM</title>
    <link rel="stylesheet" href="public/styles.css">
</head>

<body>
    <header class="navbar">
        <h1>Manage Users</h1>
        <nav><a href="/dashboard">Back</a></nav>
    </header>
    <main class="container">
        <h2>Users</h2>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <?php foreach ($users as $user) { ?>
                <tr>
                    <td>
                        <?php echo $user['id']; ?>
                    </td>
                    <td>
                        <?php echo htmlspecialchars($user['username']); ?>
                    </td>
                    <td>
                        <?php echo htmlspecialchars($user['email']); ?>
                    </td>
                    <td>
                        <?php echo $user['role']; ?>
                    </td>
                    <td>
                        <a href="/admin/edit/<?php echo $user['id']; ?>">Edit</a>
                        <a href="/admin/delete/<?php echo $user['id']; ?>"
                            onclick="return confirm('Delete?')">Delete</a>
                    </td>
                </tr>
                <?php } ?>
            </tbody>
        </table>
        <form method="POST" action="/register">
            <input type="hidden" name="csrf_token" value="<?php echo \App\Core\Middleware::generateCsrfToken(); ?>">
            <label>Username:</label><input type="text" name="username" required>
            <label>Email:</label><input type="email" name="email" required>
            <label>Password:</label><input type="password" name="password" required>
            <label>Role:</label><select name="role">
                <option value="user">User</option>
                <option value="accountant">Accountant</option>
                <option value="admin">Admin</option>
            </select>
            <button type="submit">Add User</button>
        </form>
    </main>
    <script src="/bundle.js"></script>
</body>

</html>